# FND-006 – Research: Static typing for JavaScript

## Problem capsule

The repository’s JavaScript files are written in plain CommonJS without type
annotations. Static type checking helps catch errors early and improves tooling
support. Migrating to a typed approach can enhance reliability and developer
experience.

## Goals / NFRs

* Catch type‑related errors before runtime.
* Improve editor tooling (auto‑completion, refactoring) for developers.
* Maintain compatibility with existing code.
* Keep the build process manageable.

## Options comparison

| Option | Version / Recency | Pros | Cons | Risks | Migration path |
| --- | --- | --- | --- | --- | --- |
| **Add JSDoc type annotations and enable TypeScript checking on `.js` files** | TypeScript 5.x supports type checking of JavaScript files with JSDoc comments | Minimal code migration; developers can gradually annotate existing files. Static type checking catches errors before code runs【168577167923383†L234-L256】. Tooling provides autocompletion and quick fixes【168577167923383†L381-L392】. | Less strict than migrating to `.ts`; some TypeScript features unavailable. | Low: mis‑annotations may cause false positives. | Write JSDoc annotations; configure `tsconfig.json` with `allowJs` and `checkJs`; run `tsc --noEmit` in CI. |
| **Full migration to TypeScript (`.ts` files)** | TypeScript 5.x LTS | Full static typing with all TypeScript features and strictness; robust tooling【168577167923383†L234-L256】【168577167923383†L381-L392】. | Requires renaming files, adjusting import/export syntax, configuring compiler and build pipeline; potential refactoring to fix type errors. | Medium: significant time investment; may surface hidden bugs requiring fixes. | Create `tsconfig.json`, rename `.js` to `.ts`, update code to use ES modules or adjust import syntax; compile with `tsc`. |
| **Remain in plain JavaScript** | n/a | No migration effort. | No type safety; errors only detected at runtime; limited tooling. | High: potential runtime bugs and poor developer experience. | None. |

## Preferred option

Start by adding JSDoc type annotations and enable TypeScript’s `checkJs` mode. This
provides static type checking and tooling benefits【168577167923383†L234-L256】【168577167923383†L381-L392】
without the immediate overhead of a full migration. A later migration to `.ts`
files can be planned once the codebase is well‑typed.