# ADR‑0003: Introduce comprehensive testing

## Status

Proposed

## Context

The current codebase has no automated tests.  Without tests, upgrading dependencies (such as via Dependabot) and refactoring code becomes risky.  GitHub’s documentation on Dependabot recommends having automated tests and acceptance processes before merging updates【560759686713697†L572-L578】.  A testing strategy is therefore required to support modernization efforts and ensure regressions are caught early.

## Decision

Adopt a comprehensive testing approach that includes:

* **Unit tests** for JavaScript functions (e.g., `calcTextBoxHeight`, `imageSizingCrop`) using Jest.
* **Unit tests** for Python utilities (`create_montage.py`, `pptx_to_img.py`) using pytest.
* **Integration tests** to generate a presentation via `answer.js`, convert it to images, and verify output properties (e.g., slide count, absence of overflow).
* **Coverage targets** of at least 80 % overall and 90 % on critical code paths.
* **CI integration:** Tests will be executed as part of the GitHub Actions workflow (see ADR‑0002).  Failing tests will block merges.

## Consequences

**Positive:**

* Provides assurance when updating dependencies or refactoring code.
* Enables automated pipelines to enforce quality gates.

**Negative:**

* Requires up‑front investment to write tests and possibly refactor code for testability.
* Increases build times and complexity of CI.

## Rollback Plan

If the comprehensive testing strategy proves too burdensome, reduce scope to smoke tests or disable coverage requirements.  Tests can be disabled temporarily in the CI configuration while retaining them for local development.

## References

* Research Note: [FND‑004 research](../research/FND-004.md)
* Diagnostics ID: `FND-004`
